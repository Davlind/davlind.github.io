<script>
  var cb = function() {
    var l = document.createElement('link'); l.rel = 'stylesheet';
    l.href = '//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css';
    var h = document.getElementsByTagName('head')[0]; h.appendChild(l);
  };
  var raf = requestAnimationFrame || mozRequestAnimationFrame ||
      webkitRequestAnimationFrame || msRequestAnimationFrame;
  if (raf) raf(cb);
  else window.addEventListener('load', cb);
</script>


<script src="/javascripts/snap.js"></script>
<script src="/javascripts/headroom.js"></script>

<script>
  var snapper=new Snap({
    element:document.getElementById('snap-content'),
    hyperextensible:false,
    disable:'left',
    touchToDrag:false,
  });

  var showWidth=768;

  // $(window).resize(function(){
  //   if($(window).width()>=showWidth){
  //     snapper.close();
  //     snapper.disable();
  //     $('#sidebar-toggle').hide();
  //   }else{
  //     snapper.enable();
  //     $('#sidebar-toggle').show();
  //   }
  // });

  var menuButton = document.getElementById('sidebar-toggle');
  menuButton.addEventListener('click', function() {
    if(snapper.state().state=="right"){
      snapper.close();
    }else{
      snapper.open('right');
    }
  }, false);

  // var headroom = new Headroom(menuButton);
  // headroom.scroller = document.getElementById('snap-content');

  var headroom = new Headroom(menuButton, {
  "tolerance": 5,
  "offset": 205,
  "scroller": document.getElementById('snap-content'),
  "classes": {
    "initial": "animated",
    "pinned": "slideDown",
    "unpinned": "slideUp",
    "top": "headroom--top",
    "notTop": "headroom--not-top"
  }
});
  headroom.init();

  // $("#sidebar-toggle").click(function(){
  //   if(snapper.state().state=="right"){
  //     snapper.close();
  //   }else{
  //     snapper.open('right');
  //   }
  // });

  // snapper.on('open',function(){
  //    $('#sidebar-toggle').hide();
  //  });

  // snapper.on('close',function(){
  //   if($(window).width()<showWidth){
  //     $('#sidebar-toggle').delay(160).fadeIn(5);
  //   }
  // });

</script>

{% if site.disqus_short_name and page.comments == true %}
  {% include disqus.html %}
{% endif %}
{% include google_analytics.html %}
{% include custom/after_footer.html %}
